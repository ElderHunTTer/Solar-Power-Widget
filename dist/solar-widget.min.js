!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("SolarQuoteWidget",[],t):"object"==typeof exports?exports.SolarQuoteWidget=t():e.SolarQuoteWidget=t()}(self,(()=>(()=>{var e={270:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var s=function(){return e=function e(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=function(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({containerId:"solar-quote-widget",apiKey:null,primaryColor:"#4CAF50",accentColor:"#FFC107",darkColor:"#333",fontSize:"16px",borderRadius:"8px"},o),this.currentStep=1,this.totalSteps=8,this.data={},this.map=null,this.marker=null,this.geocoder=null,this.init()},(r=[{key:"init",value:function(){this.container=document.getElementById(this.options.containerId),this.container?(this.container.classList.add("solar-quote-widget"),this.applyCustomStyles(),this.buildWidgetHtml(),this.setupEventListeners(),this.loadGoogleMapsApi()):console.error('Container with ID "'.concat(this.options.containerId,'" not found.'))}},{key:"applyCustomStyles",value:function(){var e=document.createElement("style");e.textContent="\n        #".concat(this.options.containerId," {\n          --primary-color: ").concat(this.options.primaryColor,";\n          --accent-color: ").concat(this.options.accentColor,";\n          --dark-color: ").concat(this.options.darkColor,";\n          --font-size: ").concat(this.options.fontSize,";\n          --border-radius: ").concat(this.options.borderRadius,';\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n        }\n      '),document.head.appendChild(e)}},{key:"buildWidgetHtml",value:function(){this.container.innerHTML='\n        <div class="sq-widget-container">\n          <div class="sq-progress-bar">\n            <div class="sq-progress-fill" style="width: 12.5%"></div>\n          </div>\n          \n          <div class="sq-form-steps">\n            \x3c!-- Step 1: Address --\x3e\n            <div class="sq-step sq-step-1 sq-active">\n              <h2>Where would you like to install solar panels?</h2>\n              <div class="sq-row">\n                <div class="sq-col">\n                  <label for="sq-address">Enter your full address</label>\n                  <input type="text" id="sq-address" placeholder="123 Main St, City, State, Zip">\n                  <button id="sq-find-address" class="sq-btn sq-primary-btn">Find My Address</button>\n                </div>\n                <div class="sq-col">\n                  <div id="sq-map"></div>\n                </div>\n              </div>\n              \n              <div id="sq-confirm-address" class="sq-confirm-box" style="display: none;">\n                <p>Is this your correct address?</p>\n                <p id="sq-confirmed-address" class="sq-address-text"></p>\n                <div class="sq-btn-group">\n                  <button id="sq-confirm-yes" class="sq-btn sq-success-btn">Yes, that\'s correct</button>\n                  <button id="sq-confirm-no" class="sq-btn sq-secondary-btn">No, let me correct it</button>\n                </div>\n              </div>\n              \n              <div id="sq-sunroof-data" class="sq-sunroof-box" style="display: none;">\n                \x3c!-- Sunroof data content --\x3e\n              </div>\n            </div>\n            \n            \x3c!-- Additional steps would be included here --\x3e\n          </div>\n        </div>\n      '}},{key:"setupEventListeners",value:function(){var e=this,t=document.getElementById("sq-find-address");t&&t.addEventListener("click",(function(){return e.findAddress()}));var n=document.getElementById("sq-confirm-yes");n&&n.addEventListener("click",(function(){return e.confirmAddress()}));var o=document.getElementById("sq-confirm-no");o&&o.addEventListener("click",(function(){return e.rejectAddress()}))}},{key:"loadGoogleMapsApi",value:function(){var e=this;if(this.options.apiKey){var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=".concat(this.options.apiKey,"&libraries=places&callback=initSolarWidgetMap"),t.async=!0,t.defer=!0,window.initSolarWidgetMap=function(){return e.initMap()},document.head.appendChild(t)}else console.error("Google Maps API key is required.")}},{key:"initMap",value:function(){var e=this,t=document.getElementById("sq-map");if(t){this.map=new google.maps.Map(t,{center:{lat:37.7749,lng:-122.4194},zoom:13,mapTypeControl:!1,fullscreenControl:!1,streetViewControl:!1}),this.geocoder=new google.maps.Geocoder;var n=document.getElementById("sq-address");if(n){var o=new google.maps.places.Autocomplete(n,{types:["address"],componentRestrictions:{country:"us"}});o.addListener("place_changed",(function(){var t=o.getPlace();t.geometry&&e.handlePlaceSelection(t)}))}}}},{key:"findAddress",value:function(){var e=this,t=document.getElementById("sq-address"),n=t?t.value.trim():"";n?this.geocoder.geocode({address:n},(function(t,n){if("OK"===n&&t[0]){var o=t[0],r=o.geometry.location;e.data.address={formatted:o.formatted_address,lat:r.lat(),lng:r.lng(),placeId:o.place_id},e.updateMap(r.lat(),r.lng()),e.showAddressConfirmation(o.formatted_address)}else alert("Could not find that address. Please try again.")})):alert("Please enter your address.")}},{key:"handlePlaceSelection",value:function(e){var t=e.geometry.location.lat(),n=e.geometry.location.lng();this.data.address={formatted:e.formatted_address,lat:t,lng:n,placeId:e.place_id},this.updateMap(t,n),this.showAddressConfirmation(e.formatted_address)}},{key:"updateMap",value:function(e,t){this.marker&&this.marker.setMap(null),this.map.setCenter({lat:e,lng:t}),this.map.setZoom(18),this.marker=new google.maps.Marker({position:{lat:e,lng:t},map:this.map,animation:google.maps.Animation.DROP})}},{key:"showAddressConfirmation",value:function(e){var t=document.getElementById("sq-confirm-address"),n=document.getElementById("sq-confirmed-address");t&&n&&(n.textContent=e,t.style.display="block")}},{key:"confirmAddress",value:function(){var e=this,t=document.getElementById("sq-sunroof-data");t&&(t.style.display="block",this.getSolarPotentialData().then((function(t){e.updateSunroofData(t),setTimeout((function(){return e.showStep(2)}),2e3)})))}},{key:"rejectAddress",value:function(){var e=document.getElementById("sq-address");e&&(e.value="");var t=document.getElementById("sq-confirm-address");t&&(t.style.display="none"),this.marker&&(this.marker.setMap(null),this.marker=null)}},{key:"getSolarPotentialData",value:function(){return new Promise((function(e){setTimeout((function(){e({sunlightHours:1850,roofArea:780,systemSize:6.5,viablePercentage:85,savings:"$18,000 - $25,000",environmentalImpact:"Equivalent to planting 150 trees",carbonReduction:"9 metric tons yearly"})}),1500)}))}},{key:"updateSunroofData",value:function(e){var t=document.getElementById("sq-sunroof-data");t&&(t.innerHTML='\n          <h3>Solar Potential for Your Roof</h3>\n          <div class="sq-sunroof-details">\n            <p>Usable sunlight per year: '.concat(e.sunlightHours," hours</p>\n            <p>Usable roof area: ").concat(e.roofArea," sq ft</p>\n            <p>Recommended system size: ").concat(e.systemSize," kW</p>\n            <p>Potential savings: ").concat(e.savings," over 20 years</p>\n          </div>\n        "))}},{key:"showStep",value:function(e){document.querySelectorAll(".sq-step").forEach((function(e){e.classList.remove("sq-active")}));var t=document.querySelector(".sq-step-".concat(e));t&&(t.classList.add("sq-active"),this.currentStep=e,this.updateProgressBar())}},{key:"updateProgressBar",value:function(){var e=document.querySelector(".sq-progress-fill");if(e){var t=this.currentStep/this.totalSteps*100;e.style.width="".concat(t,"%")}}}])&&o(e.prototype,r),s&&o(e,s),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,s}();window.SolarQuoteWidget=s}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};return(()=>{"use strict";n.d(o,{default:()=>r});var e=n(270),t=n.n(e);const r=t();window.SolarQuoteWidget=t()})(),o=o.default})()));